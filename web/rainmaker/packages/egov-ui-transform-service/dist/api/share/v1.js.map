{"version":3,"sources":["../../../src/api/share/v1.js"],"names":["config","db","api","post","res","body","payloads","ShareMetaData","shareTemplate","shareContent","e","console","log","producer","send","err","data","json"],"mappings":";;;;;;AAAA;;AACA;;;;AACA;;;;;;kBAEe,gBAAoB;AAAA,MAAjBA,MAAiB,QAAjBA,MAAiB;AAAA,MAATC,EAAS,QAATA,EAAS;;AACjC,MAAIC,MAAM,sBAAV;AACAA,MAAIC,IAAJ,CAAS,UAAT,EAAqB,iBAAmBC,GAAnB,EAAwB;AAAA,QAAbC,IAAa,SAAbA,IAAa;;AAC3C,QAAIC,WAAS,EAAb;AACA,QAAI;AAAA,UACMC,aADN,GACwBF,IADxB,CACME,aADN;AAAA,UAEMC,aAFN,GAEsCD,aAFtC,CAEMC,aAFN;AAAA,UAEqBC,YAFrB,GAEsCF,aAFtC,CAEqBE,YAFrB;;AAGFH,iBAAW,yBAAkB,EAACE,4BAAD,EAAgBC,0BAAhB,EAAlB,CAAX;AACD,KAJD,CAIE,OAAOC,CAAP,EAAU;AACVC,cAAQC,GAAR,CAAYF,CAAZ;AACD;AACDC,YAAQC,GAAR,CAAY,QAAZ,EAAqBN,QAArB;AACAO,uBAASC,IAAT,CAAcR,QAAd,EAAwB,UAASS,GAAT,EAAcC,IAAd,EAAoB;AAC1CL,cAAQC,GAAR,CAAYG,GAAZ;AACAJ,cAAQC,GAAR,CAAYI,IAAZ;AACAZ,UAAIa,IAAJ,CAASD,IAAT;AACD,KAJD;AAKD,GAfD;;AAiBA,SAAOd,GAAP;AACD,C","file":"v1.js","sourcesContent":["import { Router } from \"express\";\nimport producer from \"../../kafka/producer\";\nimport templateInterface from \"./templates\";\n\nexport default ({ config, db }) => {\n  let api = Router();\n  api.post(\"/_create\", function({ body }, res) {\n    let payloads=[];\n    try {\n      const { ShareMetaData } = body;\n      const { shareTemplate, shareContent } = ShareMetaData;\n      payloads = templateInterface({shareTemplate, shareContent});\n    } catch (e) {\n      console.log(e);\n    }\n    console.log(\"before\",payloads);\n    producer.send(payloads, function(err, data) {\n      console.log(err);\n      console.log(data);\n      res.json(data);\n    });\n  });\n\n  return api;\n};\n"]}